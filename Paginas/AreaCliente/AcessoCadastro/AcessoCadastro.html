<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport" />
    <link href="/Layout/Imagens/Logotipos/Icone.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="/Layout/Imagens/Logotipos/Icone.ico" rel="icon" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/Layout/Imagens/Logotipos/LogotipoAplicativo192192.png">
    <link rel="manifest" href="/Manifest.json">
    <meta name="theme-color" content="#ec4115">
    <meta name="color-scheme" content="light dark">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Área do Cliente - Redutores IBR</title>
    <meta name="description" content="Acesse a área do cliente para o Configurador Online da Redutores IBR" />
    <meta property="og:title" content="Área do Cliente - Redutores IBR" />
    <meta property="og:description" content="Acesse a área do cliente para o Configurador Online da Redutores IBR" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/Layout/Imagens/Logotipos/LogotipoAplicativo512512" />

    <script>
        (function () {
            function getPref() {
                try {
                    if (window.LGPDCOOKIES && typeof LGPDCOOKIES.getValueCookie === 'function') {
                        var c = LGPDCOOKIES.getValueCookie('modoEscuro');
                        if (c !== null && c !== '') return c;
                    }
                } catch (e) { }
                try {
                    var v = localStorage.getItem('modoEscuro');
                    if (v !== null) return v;
                } catch (e) { }
                return null;
            }
            var tema = getPref();
            var meta = document.querySelector('meta[name="color-scheme"]');
            if (tema === '1') {
                document.documentElement.classList.add('dark-mode');
                if (meta) meta.setAttribute('content', 'dark');
                document.addEventListener('DOMContentLoaded', function () {
                    document.body.classList.add('dark-mode');
                });
            } else if (tema === '0') {
                if (meta) meta.setAttribute('content', 'light');
            }
        })();
    </script>

    <script>
        (function () {
            function getThemePreference() {
                try {
                    if (window.LGPDCOOKIES && typeof LGPDCOOKIES.getValueCookie === 'function') {
                        const c = LGPDCOOKIES.getValueCookie('modoEscuro');
                        if (c !== null && c !== '') return c;
                    }
                } catch (e) { }
                try {
                    const stored = localStorage.getItem('modoEscuro');
                    if (stored !== null) return stored;
                } catch (e) { }
                return '0';
            }

            function applySavedTheme() {
                const tema = getThemePreference();
                const meta = document.querySelector('meta[name="color-scheme"]');
                const isDark = tema === '1';
                document.documentElement.classList.toggle('dark-mode', isDark);
                if (document.body) document.body.classList.toggle('dark-mode', isDark);
                if (meta) meta.setAttribute('content', isDark ? 'dark' : 'light');
            }

            document.addEventListener('DOMContentLoaded', applySavedTheme);
            window.addEventListener('pageshow', applySavedTheme);
        })();
    </script>

    <base href="/Paginas/AreaCliente/AcessoCadastro/" />

    <link href="/Paginas/AreaCliente/Estrutura/TipografiaAreaCliente.min.css" rel="stylesheet">
    <link href="/Paginas/AreaCliente/Estrutura/LayoutCadastroAreaCliente.min.css" rel="stylesheet" as="style"
        onload="this.onload=null;">
    <link href="/Paginas/AreaCliente/Estrutura/LayoutAreaCliente.min.css" rel="stylesheet" as="style"
        onload="this.onload=null;">


    <script src="/CSRFSetup.min.js"></script>
    <script id="lgpd-key" urlBase="" prefix="COOKIES"></script>
    <script src="/Paginas/Universais/ValidacaoDocumento.min.js"></script>
</head>

<body>
    <div id="loading-area" class="d-flex justify-content-center align-items-center" style="height:100vh;">
        <span class="loading-spinner"></span>
    </div>
    <main id="main-content" style="display:none;">
        <div class="container-fluid" id="content">
            <div class="row justify-content-end">
                <div class="col-xl-4 col-lg-6 col-12 me-xl-5">
                    <div
                        class="header__login d-flex gap-3 gap-lg-5 flex-nowrap align-items-center my-5 mx-3 mx-lg-0 justify-content-between">
                        <svg xmlns="http://www.w3.org/2000/svg" width="135.078" height="91.522"
                            viewBox="0 0 135.078 91.522">
                            <g id="logo" transform="translate(-189.856 -139.634)">
                                <path id="Caminho_1" data-name="Caminho 1"
                                    d="M215.662,139.634,189.856,164.9v66.254H324.935V139.634Z"
                                    transform="translate(0 0)" fill="#ec4115" fill-rule="evenodd"></path>
                                <path id="Caminho_2" data-name="Caminho 2"
                                    d="M328.963,236.475q7.391,0,11.752,3.809t4.361,11.426a14.973,14.973,0,0,1-2.625,8.818q2.625,3.532,2.625,9.338a14.744,14.744,0,0,1-4.324,10.855q-4.324,4.334-11.42,4.334H319.5v-12.2h9.535a3.177,3.177,0,0,0,3.252-3.218,2.816,2.816,0,0,0-.739-1.946,3.139,3.139,0,0,0-2.439-.824H319.5V255.045l9.461-.074a3.2,3.2,0,0,0,2.434-.9,3.071,3.071,0,0,0,.892-2.252,2.77,2.77,0,0,0-.817-2.027,3.3,3.3,0,0,0-2.451-.826H316.1v36.088H302.8V249.825l13.305-13.35Zm-42.168,13.35,13.3-13.35v12.181l-13.3,13.218Z"
                                    transform="translate(-80.953 -80.872)" fill="#fff" fill-rule="evenodd"></path>
                                <path id="Caminho_3" data-name="Caminho 3"
                                    d="M369.716,295.995v-7.781h8.6v.768h-7.1v2.656h6.8v.726h-6.8v2.864h7.1v.767Zm-5.575-7.781a6.273,6.273,0,0,1,3.14.57,1.882,1.882,0,0,1,.784,1.743,1.79,1.79,0,0,1-.518,1.454,3.432,3.432,0,0,1-1.8.53,4.664,4.664,0,0,1,1.126.248,1.912,1.912,0,0,1,.763.486.975.975,0,0,1,.268.666v2.084h-1.533v-1.7a1.175,1.175,0,0,0-.5-1.079,3.546,3.546,0,0,0-1.834-.322H359.22v3.1h-1.5v-7.781Zm.035.768h-4.922V292.1H364a8.217,8.217,0,0,0,1.222-.076,2.215,2.215,0,0,0,.83-.286,1.219,1.219,0,0,0,.5-1.122v-.258a1.188,1.188,0,0,0-.357-1.019,3.947,3.947,0,0,0-2.016-.362Zm-13.686-.83q1.089,0,1.882.037a9.439,9.439,0,0,1,1.535.2,2.667,2.667,0,0,1,1.152.495,1.518,1.518,0,0,1,.434.555,3.213,3.213,0,0,1,.259,1.5v2.676a2.031,2.031,0,0,1-.693,1.7,2.285,2.285,0,0,1-.991.489,7.183,7.183,0,0,1-1.335.213q-.692.046-1.511.046H349.69a15.274,15.274,0,0,1-2.043-.121,3.952,3.952,0,0,1-1.507-.492,2.034,2.034,0,0,1-.875-1.856v-2.76a6.332,6.332,0,0,1,.037-.738,2,2,0,0,1,.183-.622,1.792,1.792,0,0,1,.438-.57,2.6,2.6,0,0,1,1.041-.5,7.266,7.266,0,0,1,1.346-.208q.7-.043,1.7-.043Zm-.035.768H349.9q-.736,0-1.248.034a4.324,4.324,0,0,0-.911.15,1.412,1.412,0,0,0-.625.343,1.246,1.246,0,0,0-.3.709l-.054.547v2.844a1.775,1.775,0,0,0,.444,1.277,1.5,1.5,0,0,0,.866.365,14.068,14.068,0,0,0,1.581.1h.871q1.437,0,2.145-.066a2.108,2.108,0,0,0,1.069-.337,1.524,1.524,0,0,0,.514-1.277v-2.99a1.432,1.432,0,0,0-.588-1.328,2.789,2.789,0,0,0-1.3-.332q-.335-.022-1.017-.027l-.891-.013Zm-11.835,7.076v-7.013H334.3v-.768h10.17v.768h-4.318v7.013Zm-10.914-.707a2.67,2.67,0,0,1,.4.023q1.184-.025,1.831-.087a2.385,2.385,0,0,0,.986-.267.823.823,0,0,0,.46-.509,3.221,3.221,0,0,0,.093-.859v-5.374h1.534v5.572a1.846,1.846,0,0,1-1.089,1.783,5.6,5.6,0,0,1-1.812.406q-1.071.082-2.7.082-1.271,0-2.092-.058a6.626,6.626,0,0,1-1.548-.287,1.981,1.981,0,0,1-.777-.434,1.721,1.721,0,0,1-.44-.646,2.077,2.077,0,0,1-.137-.743v-5.676h1.5v5.653a1.087,1.087,0,0,0,.623,1.152,3.8,3.8,0,0,0,1.056.21q.642.051,1.744.081a2.285,2.285,0,0,1,.375-.023Zm-11.6.707h-6.919v-7.781h6.545a8.361,8.361,0,0,1,2.463.3,3.49,3.49,0,0,1,1.461.834,2.716,2.716,0,0,1,.644,1.91v1.659a2.677,2.677,0,0,1-2.034,2.781,6.348,6.348,0,0,1-2.16.3Zm-.513-.767a8.042,8.042,0,0,0,1.552-.124,2.2,2.2,0,0,0,.977-.425,1.522,1.522,0,0,0,.553-.839,4.708,4.708,0,0,0,.126-1.145v-1.72a1.786,1.786,0,0,0-1.134-1.7,3.93,3.93,0,0,0-1.665-.3h-5.3v6.246Zm-16.8.767v-7.781h8.6v.768h-7.1v2.656h6.8v.726h-6.8v2.864h7.1v.767Zm-5.575-7.781a6.276,6.276,0,0,1,3.141.57,1.882,1.882,0,0,1,.784,1.743,1.79,1.79,0,0,1-.519,1.454,3.431,3.431,0,0,1-1.8.53,4.662,4.662,0,0,1,1.126.248,1.909,1.909,0,0,1,.762.486.974.974,0,0,1,.268.666v2.084h-1.533v-1.7a1.175,1.175,0,0,0-.5-1.079,3.546,3.546,0,0,0-1.834-.322h-4.817v3.1h-1.5v-7.781Zm.035.768h-4.922V292.1h4.743a8.21,8.21,0,0,0,1.222-.076,2.215,2.215,0,0,0,.83-.286,1.219,1.219,0,0,0,.5-1.122v-.258a1.188,1.188,0,0,0-.357-1.019,3.947,3.947,0,0,0-2.016-.362Zm6.849-36.444v32.517h-13.3v-19.3l13.3-13.218Zm73.816-16.063q7.391,0,11.753,3.809t4.361,11.426a14.7,14.7,0,0,1-4.324,10.835,14.321,14.321,0,0,1-1.69,1.45l5.645,5.782v15.555l-25.723-25.778h6.43a6.076,6.076,0,0,0,4.509-1.566,5.383,5.383,0,0,0,1.552-3.952,4.984,4.984,0,0,0-1.368-3.728q-1.367-1.342-4.694-1.342h-9.313v36.014h-13.3V249.8l13.3-13.33Zm10.677,51.676q1.406,0,2.373.1a4.78,4.78,0,0,1,1.464.327,1.6,1.6,0,0,1,.945,1.547v.217h-1.5a5.01,5.01,0,0,0-.1-.7.652.652,0,0,0-.307-.392,1.454,1.454,0,0,0-.593-.22,6.556,6.556,0,0,0-.906-.091q-.518-.02-1.377-.02h-.375a7.17,7.17,0,0,0-2.622.309.659.659,0,0,0-.351.366,1.833,1.833,0,0,0-.093.642,1.1,1.1,0,0,0,.767,1.183,3.9,3.9,0,0,0,.884.161q.518.042,1.1.047l1.2.01q1.755.073,2.378.124a3.87,3.87,0,0,1,1.137.259,1.348,1.348,0,0,1,.83.7,3.733,3.733,0,0,1,.22,1.063,2.3,2.3,0,0,1-.285,1.165,1.743,1.743,0,0,1-.874.742,6,6,0,0,1-1.662.3q-1,.062-2.51.062h-.553a17.308,17.308,0,0,1-1.869-.09,4.283,4.283,0,0,1-1.38-.358,1.487,1.487,0,0,1-.738-.626,2.239,2.239,0,0,1-.242-.948,2.387,2.387,0,0,0,.035-.466h1.531a.455.455,0,0,1-.035.175,3.526,3.526,0,0,0,.135.83.786.786,0,0,0,.418.468,2.941,2.941,0,0,0,1.158.228q.484.021,1.464.02.662,0,1.019.023a7.446,7.446,0,0,0,2.23-.271.832.832,0,0,0,.5-.441,1.944,1.944,0,0,0,.124-.753v-.124a1.027,1.027,0,0,0-.462-.985,1.888,1.888,0,0,0-.786-.218q-.512-.051-1.553-.094l-1.276-.025q-.627-.013-1.311-.055a12.011,12.011,0,0,1-1.239-.134,4.335,4.335,0,0,1-.939-.252,1.438,1.438,0,0,1-.7-.594,2.236,2.236,0,0,1-.241-.921,1.834,1.834,0,0,1,.984-1.825,4.5,4.5,0,0,1,1.559-.383q.945-.085,2.435-.085Z"
                                    transform="translate(-80.953 -80.872)" fill="#fff" fill-rule="evenodd"></path>
                            </g>
                        </svg>

                        <a href="https://configurador.redutoresibr.com.br/" target="_self"
                            class="fs-5 fw-semibold link-dark link-opacity-50-hover d-flex gap-2 align-items-center">
                            Voltar para o configurador de produtos
                            <svg xmlns="http://www.w3.org/2000/svg" width="19.057" height="19.183"
                                viewBox="0 0 19.057 19.183">
                                <line id="Linha_17" data-name="Linha 17" x1="11.65" y2="11.788"
                                    transform="translate(0.711 6.692)" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                </line>
                                <path id="Caminho_938" data-name="Caminho 938" d="M0,0l7.18,7.178L0,14.357"
                                    transform="translate(2.331 6.574) rotate(-45)" fill="none" stroke="currentColor"
                                    stroke-width="2"></path>
                            </svg>
                        </a>

                    </div>

                    <div class="login__box my-5">
                        <h1 class="fs-1 fw-normal text-dark text-center mb-1">
                            Área do Cliente<br>
                            <span style="color: #ec4115;">Configurador Online</span>
                        </h1>
                        <br>
                        <p class="fs-6 fw-normal text-dark text-center mb-3">Preencha seus dados para acessar sua conta.
                        </p>

                        <ul class="pills-login nav nav-pills mb-3 p-1 rounded-2 bg-white mx-auto" id="login-tab"
                            role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link px-5 text-dark active" id="pills-entrar-tab"
                                    data-bs-toggle="pill" data-bs-target="#pills-entrar" type="button" role="tab"
                                    aria-controls="pills-entrar" aria-selected="true">Entrar</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link px-5 text-dark" id="pills-cadastrar-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-cadastrar" type="button" role="tab"
                                    aria-controls="pills-cadastrar" aria-selected="false"
                                    tabindex="-1">Cadastrar</button>
                            </li>
                        </ul>
                        <div class="tab-content p-3 px-md-5 py-md-4" id="login-tabContent">
                            <div class="tab-pane fade show active" id="pills-entrar" role="tabpanel"
                                aria-labelledby="pills-entrar-tab">
                                <div class="default-messages-content"></div>
                                <form id="formLogin">
                                    <div class="mb-3">
                                        <div class="input-group bg-white border rounded py-2 input-form">
                                            <span
                                                class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="16"
                                                    viewBox="0 0 20.769 15.544">
                                                    <g id="noun-envelope-1071784" transform="translate(-8 -21.1)">
                                                        <g id="Grupo_168" data-name="Grupo 168"
                                                            transform="translate(8 21.1)">
                                                            <path id="Caminho_930" data-name="Caminho 930"
                                                                d="M27.088,21.1H9.681A1.762,1.762,0,0,0,8,22.929V34.816a1.761,1.761,0,0,0,1.681,1.829H27.088a1.762,1.762,0,0,0,1.681-1.829V22.929A1.761,1.761,0,0,0,27.088,21.1Zm-.321,1.076-7.216,5.189a1.486,1.486,0,0,1-1.113.484,1.591,1.591,0,0,1-1.113-.484L10,22.176Zm1.014,12.64a.723.723,0,0,1-.692.753H9.681a.724.724,0,0,1-.692-.753V22.929a1.234,1.234,0,0,1,.049-.3l.025.027,7.57,5.458a2.442,2.442,0,0,0,1.8.807,2.483,2.483,0,0,0,1.8-.807l7.463-5.458.025-.027a1.043,1.043,0,0,1,.049.3V34.816Z"
                                                                transform="translate(-8 -21.1)"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </span>

                                            <div class="form-floating">
                                                <input type="email" class="form-control bg-transparent border-0"
                                                    id="email" name="email" placeholder="Digite seu E-mail*"
                                                    autocomplete="email" required aria-required="true"
                                                    aria-invalid="false" aria-describedby="email-error">
                                                <label for="email">E-mail</label>
                                            </div>
                                        </div>

                                        <div
                                            class="input-group bg-white border rounded py-2 mt-3 input-form position-relative">
                                            <span
                                                class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                    viewBox="0 0 13.216 15.419">
                                                    <g id="noun-lock-6031914" transform="translate(-4 -2)">
                                                        <g id="Layer_2" data-name="Layer 2" transform="translate(4 2)">
                                                            <path id="Caminho_932" data-name="Caminho 932"
                                                                d="M15.564,6.956h-1.1V5.3a3.3,3.3,0,0,0-3.3-3.3h-1.1a3.3,3.3,0,0,0-3.3,3.3V6.956h-1.1A1.652,1.652,0,0,0,4,8.608v7.159a1.652,1.652,0,0,0,1.652,1.652h9.912a1.652,1.652,0,0,0,1.652-1.652V8.608a1.652,1.652,0,0,0-1.652-1.652ZM7.855,5.3a2.2,2.2,0,0,1,2.2-2.2h1.1a2.2,2.2,0,0,1,2.2,2.2V6.956H7.855Zm8.26,10.463a.551.551,0,0,1-.551.551H5.652a.551.551,0,0,1-.551-.551V8.608a.551.551,0,0,1,.551-.551h9.912a.551.551,0,0,1,.551.551Zm-4.956-2.2v1.1a.551.551,0,1,1-1.1,0v-1.1a.551.551,0,0,1,1.1,0Z"
                                                                transform="translate(-4 -2)"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </span>
                                            <div class="form-floating flex-grow-1">
                                                <input type="password" class="form-control bg-transparent border-0"
                                                    id="senhaLogin" name="senha" placeholder="Senha"
                                                    autocomplete="current-password" required>
                                                <label for="senhaLogin">Senha</label>
                                            </div>
                                            <button type="button"
                                                class="btn btn-outline-secondary border-0 toggle-password"
                                                data-target="#senhaLogin"><svg xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M3.97993 8.22257C3.05683 9.31382 2.35242 10.596 1.93436 12.0015C3.22565 16.338 7.24311 19.5 11.9991 19.5C12.9917 19.5 13.9521 19.3623 14.8623 19.1049M6.22763 6.22763C7.88389 5.13558 9.86771 4.5 12 4.5C16.756 4.5 20.7734 7.66205 22.0647 11.9985C21.3528 14.3919 19.8106 16.4277 17.772 17.772M6.22763 6.22763L3 3M6.22763 6.22763L9.87868 9.87868M17.772 17.772L21 21M17.772 17.772L14.1213 14.1213M14.1213 14.1213C14.6642 13.5784 15 12.8284 15 12C15 10.3431 13.6569 9 12 9C11.1716 9 10.4216 9.33579 9.87868 9.87868M14.1213 14.1213L9.87868 9.87868"
                                                        stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                                        stroke-linejoin="round" />
                                                </svg></button>
                                        </div>

                                        <div class="input-group justify-content-between gap-2 flex-wrap mt-3">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="lembrar"
                                                    name="lembrar">
                                                <label class="form-check-label" for="lembrar">Lembrar-me</label>
                                            </div>
                                            <a href="#" id="forgotPassword"
                                                class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">Esqueceu
                                                a Senha?</a>
                                        </div>

                                        <div class="form-check mt-3">
                                            <input class="form-check-input" type="checkbox" id="politicaLogin" required>
                                            <label class="form-check-label aceite-label" for="politicaLogin">
                                                Aceito a <a href="#"
                                                    onclick="abrirModalPolitica();return false;">Política de
                                                    Privacidade, os Termos de Serviço</a> e o
                                                <a href="#" onclick="abrirModalResponsa();return false;">Termo de
                                                    Responsabilidade de Acesso a Área do Cliente IBR</a>
                                            </label>
                                        </div>

                                        <button type="submit"
                                            class="btn btn-orange btn-lg w-100 mt-4 py-3 rounded-0">Entrar</button>
                                </form>
                            </div>
                            <form id="formRecuperarSenha" class="login-form d-none" novalidate>
                                <h3 class="mb-3 text-center">Esqueceu a Senha?</h3>
                                <p class="mb-4 text-center">Digite seu e-mail para receber o link de redefinição.</p>
                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="16"
                                                viewBox="0 0 20.769 15.544">
                                                <g id="noun-envelope-1071784" transform="translate(-8 -21.1)">
                                                    <g id="Grupo_168" data-name="Grupo 168"
                                                        transform="translate(8 21.1)">
                                                        <path id="Caminho_930" data-name="Caminho 930"
                                                            d="M27.088,21.1H9.681A1.762,1.762,0,0,0,8,22.929V34.816a1.761,1.761,0,0,0,1.681,1.829H27.088a1.762,1.762,0,0,0,1.681-1.829V22.929A1.761,1.761,0,0,0,27.088,21.1Zm-.321,1.076-7.216,5.189a1.486,1.486,0,0,1-1.113.484,1.591,1.591,0,0,1-1.113-.484L10,22.176Zm1.014,12.64a.723.723,0,0,1-.692.753H9.681a.724.724,0,0,1-.692-.753V22.929a1.234,1.234,0,0,1,.049-.3l.025.027,7.57,5.458a2.442,2.442,0,0,0,1.8.807,2.483,2.483,0,0,0,1.8-.807l7.463-5.458.025-.027a1.043,1.043,0,0,1,.049.3V34.816Z"
                                                            transform="translate(-8 -21.1)"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>

                                        <div class="form-floating">
                                            <input type="email" class="form-control bg-transparent border-0"
                                                id="emailRecuperar" name="emailRecuperar"
                                                placeholder="Digite seu E-mail*" autocomplete="email" required>
                                            <label for="emailRecuperar">E-mail</label>
                                        </div>
                                    </div>
                                </div>
                                <div id="mensagemRecuperar" style="margin-bottom:1rem;color:#ec4115;font-weight:bold">
                                </div>
                                <button type="submit" class="btn btn-orange w-100 py-3">Enviar</button>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="pills-cadastrar" role="tabpanel"
                            aria-labelledby="pills-cadastrar-tab" tabindex="0">
                            <form id="cadastro" class="login-form" novalidate="novalidate">
                                <div class="mb-3">
                                    <div class="d-flex column-gap-3 flex-wrap bg-white border rounded py-2 px-3">
                                        <p class="fs-6 fw-normal text-dark w-100 mb-1">Tipo:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="Tipo" ax-control="text"
                                                value="2" id="tipoPF" checked="">
                                            <label class="form-check-label" for="tipoPF">
                                                Pessoa Física
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="Tipo" ax-control="text"
                                                value="1" id="tipoPJ">
                                            <label class="form-check-label" for="tipoPJ">
                                                Pessoa Jurídica
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 input-form position-relative">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                fill="currentColor" class="bi bi-person" viewBox="0 0 14 14">
                                                <path
                                                    d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z">
                                                </path>
                                            </svg>
                                        </span>
                                        <div class="form-floating">
                                            <input type="text" class="form-control bg-transparent border-0"
                                                id="NomeCompleto" name="NomeCompleto" placeholder="Username">
                                            <label for="NomeCompleto">Nome</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 pessoaFisica input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                fill="currentColor" class="bi bi-file-binary" viewBox="0 0 16 16">
                                                <path
                                                    d="M5.526 13.09c.976 0 1.524-.79 1.524-2.205 0-1.412-.548-2.203-1.524-2.203-.978 0-1.526.79-1.526 2.203 0 1.415.548 2.206 1.526 2.206zm-.832-2.205c0-1.05.29-1.612.832-1.612.358 0 .607.247.733.721L4.7 11.137a6.749 6.749 0 0 1-.006-.252zm.832 1.614c-.36 0-.606-.246-.732-.718l1.556-1.145c.003.079.005.164.005.249 0 1.052-.29 1.614-.829 1.614zm5.329.501v-.595H9.73V8.772h-.69l-1.19.786v.688L8.986 9.5h.05v2.906h-1.18V13h3z">
                                                </path>
                                                <path
                                                    d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
                                                </path>
                                            </svg>
                                        </span>
                                        <div class="form-floating">
                                            <input type="text" class="form-control bg-transparent border-0" id="Cpf"
                                                name="Cpf" placeholder="CPF" maxlength="14" autocomplete="off">
                                            <label for="Cpf">CPF</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3 pessoaJuridica d-none position-relative">
                                    <div class="input-group bg-white border rounded py-2 input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                fill="currentColor" class="bi bi-file-binary" viewBox="0 0 16 16">
                                                <path
                                                    d="M5.526 13.09c.976 0 1.524-.79 1.524-2.205 0-1.412-.548-2.203-1.524-2.203-.978 0-1.526.79-1.526 2.203 0 1.415.548 2.206 1.526 2.206zm-.832-2.205c0-1.05.29-1.612.832-1.612.358 0 .607.247.733.721L4.7 11.137a6.749 6.749 0 0 1-.006-.252zm.832 1.614c-.36 0-.606-.246-.732-.718l1.556-1.145c.003.079.005.164.005.249 0 1.052-.29 1.614-.829 1.614zm5.329.501v-.595H9.73V8.772h-.69l-1.19.786v.688L8.986 9.5h.05v2.906h-1.18V13h3z">
                                                </path>
                                                <path
                                                    d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z">
                                                </path>
                                            </svg>
                                        </span>
                                        <div class="form-floating">
                                            <input type="text" class="form-control bg-transparent border-0" id="Cnpj"
                                                name="Cnpj" placeholder="CNPJ" maxlength="18" autocomplete="off">
                                            <label for="Cnpj">CNPJ</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <div
                                        class="input-group bg-white border rounded py-2 pessoaJuridica d-none input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                fill="currentColor" class="bi bi-briefcase" viewBox="0 0 16 16">
                                                <path
                                                    d="M6.5 1A1.5 1.5 0 0 0 5 2.5V3H1.5A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-8A1.5 1.5 0 0 0 14.5 3H11v-.5A1.5 1.5 0 0 0 9.5 1h-3zm0 1h3a.5.5 0 0 1 .5.5V3H6v-.5a.5.5 0 0 1 .5-.5zm1.886 6.914L15 7.151V12.5a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5V7.15l6.614 1.764a1.5 1.5 0 0 0 .772 0zM1.5 4h13a.5.5 0 0 1 .5.5v1.616L8.129 7.948a.5.5 0 0 1-.258 0L1 6.116V4.5a.5.5 0 0 1 .5-.5z">
                                                </path>
                                            </svg>
                                        </span>
                                        <div class="form-floating">
                                            <input type="text" class="form-control bg-transparent border-0" readonly
                                                id="NomeEmpresa" name="NomeEmpresa" placeholder="Nome da empresa">
                                            <label for="NomeEmpresa">Nome da Empresa</label>
                                        </div>
                                    </div>
                                    <span id="spinnerEmpresa"
                                        class="loading-spinner pessoaJuridica position-absolute top-50 start-50 translate-middle"
                                        style="display:none;"></span>
                                </div>

                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 input-form position-relative">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="16"
                                                viewBox="0 0 20.769 15.544">
                                                <g id="noun-envelope-1071784" transform="translate(-8 -21.1)">
                                                    <g id="Grupo_168" data-name="Grupo 168"
                                                        transform="translate(8 21.1)">
                                                        <path id="Caminho_930" data-name="Caminho 930"
                                                            d="M27.088,21.1H9.681A1.762,1.762,0,0,0,8,22.929V34.816a1.761,1.761,0,0,0,1.681,1.829H27.088a1.762,1.762,0,0,0,1.681-1.829V22.929A1.761,1.761,0,0,0,27.088,21.1Zm-.321,1.076-7.216,5.189a1.486,1.486,0,0,1-1.113.484,1.591,1.591,0,0,1-1.113-.484L10,22.176Zm1.014,12.64a.723.723,0,0,1-.692.753H9.681a.724.724,0,0,1-.692-.753V22.929a1.234,1.234,0,0,1,.049-.3l.025.027,7.57,5.458a2.442,2.442,0,0,0,1.8.807,2.483,2.483,0,0,0,1.8-.807l7.463-5.458.025-.027a1.043,1.043,0,0,1,.049.3V34.816Z"
                                                            transform="translate(-8 -21.1)"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <div class="form-floating">
                                            <input type="text" class="form-control bg-transparent border-0" id="Email"
                                                name="Email" placeholder="Email" autocomplete="email">
                                            <label for="Email">E-mail</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                viewBox="0 0 13.216 15.419">
                                                <g id="noun-lock-6031914" transform="translate(-4 -2)">
                                                    <g id="Layer_2" data-name="Layer 2" transform="translate(4 2)">
                                                        <path id="Caminho_932" data-name="Caminho 932"
                                                            d="M15.564,6.956h-1.1V5.3a3.3,3.3,0,0,0-3.3-3.3h-1.1a3.3,3.3,0,0,0-3.3,3.3V6.956h-1.1A1.652,1.652,0,0,0,4,8.608v7.159a1.652,1.652,0,0,0,1.652,1.652h9.912a1.652,1.652,0,0,0,1.652-1.652V8.608a1.652,1.652,0,0,0-1.652-1.652ZM7.855,5.3a2.2,2.2,0,0,1,2.2-2.2h1.1a2.2,2.2,0,0,1,2.2,2.2V6.956H7.855Zm8.26,10.463a.551.551,0,0,1-.551.551H5.652a.551.551,0,0,1-.551-.551V8.608a.551.551,0,0,1,.551-.551h9.912a.551.551,0,0,1,.551.551Zm-4.956-2.2v1.1a.551.551,0,1,1-1.1,0v-1.1a.551.551,0,0,1,1.1,0Z"
                                                            transform="translate(-4 -2)"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <div class="form-floating flex-grow-1">
                                            <input type="password" class="form-control bg-transparent border-0"
                                                id="senhaCadastro" name="senha" placeholder="Senha"
                                                autocomplete="new-password" required>
                                            <label for="senhaCadastro">Senha</label>
                                        </div>
                                        <button type="button" class="btn btn-outline-secondary border-0 toggle-password"
                                            data-target="#senhaCadastro">Exibir</button>
                                    </div>
                                </div>
                                <ul id="passwordCriteria" class="password-popover list-unstyled small d-none">
                                    <li id="criterion-length" class="text-danger">Mínimo 8 caracteres</li>
                                    <li id="criterion-upper" class="text-danger">Uma letra maiúscula</li>
                                    <li id="criterion-lower" class="text-danger">Uma letra minúscula</li>
                                    <li id="criterion-digit" class="text-danger">Um número</li>
                                    <li id="criterion-special" class="text-danger">Um caractere especial</li>
                                </ul>

                                <div class="mb-3">
                                    <div class="input-group bg-white border rounded py-2 input-form">
                                        <span
                                            class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                viewBox="0 0 13.216 15.419">
                                                <g id="noun-lock-6031914" transform="translate(-4 -2)">
                                                    <g id="Layer_2" data-name="Layer 2" transform="translate(4 2)">
                                                        <path id="Caminho_932" data-name="Caminho 932"
                                                            d="M15.564,6.956h-1.1V5.3a3.3,3.3,0,0,0-3.3-3.3h-1.1a3.3,3.3,0,0,0-3.3,3.3V6.956h-1.1A1.652,1.652,0,0,0,4,8.608v7.159a1.652,1.652,0,0,0,1.652,1.652h9.912a1.652,1.652,0,0,0,1.652-1.652V8.608a1.652,1.652,0,0,0-1.652-1.652ZM7.855,5.3a2.2,2.2,0,0,1,2.2-2.2h1.1a2.2,2.2,0,0,1,2.2,2.2V6.956H7.855Zm8.26,10.463a.551.551,0,0,1-.551.551H5.652a.551.551,0,0,1-.551-.551V8.608a.551.551,0,0,1,.551-.551h9.912a.551.551,0,0,1,.551.551Zm-4.956-2.2v1.1a.551.551,0,1,1-1.1,0v-1.1a.551.551,0,0,1,1.1,0Z"
                                                            transform="translate(-4 -2)"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <div class="form-floating flex-grow-1">
                                            <input type="password" class="form-control bg-transparent border-0"
                                                id="senhaRepetida" name="senhaRepetida" placeholder="Repita a Senha"
                                                autocomplete="new-password" required>
                                            <label for="senhaRepetida">Repita a Senha</label>
                                        </div>
                                        <button type="button" class="btn btn-outline-secondary border-0 toggle-password"
                                            data-target="#senhaRepetida">Exibir</button>
                                    </div>
                                </div>
                                <div id="passwordMatch" class="mt-2"></div>

                                <div class="form-check mt-3">
                                    <input class="form-check-input" type="checkbox" id="politicaCadastro" required>
                                    <label class="form-check-label aceite-label" for="politicaCadastro">
                                        Aceito a <a href="#" onclick="abrirModalPolitica();return false;">Política de
                                            Privacidade, os Termos de Serviço</a> e o
                                        <a href="#" onclick="abrirModalResponsa();return false;">Termo de
                                            Responsabilidade de Acesso a Área do Cliente IBR</a>
                                    </label>
                                </div>

                                <button id="validation__code" type="submit"
                                    class="btn btn-orange btn-lg w-100 mt-4 py-3 rounded-0">Cadastrar</button>

                            </form>
                        </div>
                    </div>
                    <div id="redefinirSenhaContainer" class="login-form d-none">
                        <h3 class="mb-3 text-center">Redefinir Senha</h3>
                        <form id="formRedefinirSenha" novalidate>
                            <input type="hidden" id="tokenRedef" name="token">
                            <input type="text" name="username" autocomplete="username" class="visually-hidden">
                            <div class="mb-3">
                                <div class="input-group bg-white border rounded py-2 input-form">
                                    <span
                                        class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 13.216 15.419">
                                            <g id="noun-lock-6031914" transform="translate(-4 -2)">
                                                <g id="Layer_2" data-name="Layer 2" transform="translate(4 2)">
                                                    <path id="Caminho_932" data-name="Caminho 932"
                                                        d="M15.564,6.956h-1.1V5.3a3.3,3.3,0,0,0-3.3-3.3h-1.1a3.3,3.3,0,0,0-3.3,3.3V6.956h-1.1A1.652,1.652,0,0,0,4,8.608v7.159a1.652,1.652,0,0,0,1.652,1.652h9.912a1.652,1.652,0,0,0,1.652-1.652V8.608a1.652,1.652,0,0,0-1.652-1.652ZM7.855,5.3a2.2,2.2,0,0,1,2.2-2.2h1.1a2.2,2.2,0,0,1,2.2,2.2V6.956H7.855Zm8.26,10.463a.551.551,0,0,1-.551.551H5.652a.551.551,0,0,1-.551-.551V8.608a.551.551,0,0,1,.551-.551h9.912a.551.551,0,0,1,.551.551Zm-4.956-2.2v1.1a.551.551,0,1,1-1.1,0v-1.1a.551.551,0,0,1,1.1,0Z"
                                                        transform="translate(-4 -2)"></path>
                                                </g>
                                            </g>
                                        </svg>
                                    </span>
                                    <div class="form-floating flex-grow-1">
                                        <input type="password" class="form-control bg-transparent border-0"
                                            id="senhaRedefinir" placeholder="Senha" autocomplete="new-password"
                                            required>
                                        <label for="senhaRedefinir">Senha</label>
                                    </div>
                                    <button type="button" class="btn btn-outline-secondary border-0 toggle-password"
                                        data-target="#senhaRedefinir">Exibir</button>
                                </div>
                            </div>
                            <ul id="passwordCriteriaRedef" class="password-popover list-unstyled small d-none">
                                <li id="criterion-length-red" class="text-danger">Mínimo 8 caracteres</li>
                                <li id="criterion-upper-red" class="text-danger">Uma letra maiúscula</li>
                                <li id="criterion-lower-red" class="text-danger">Uma letra minúscula</li>
                                <li id="criterion-digit-red" class="text-danger">Um número</li>
                                <li id="criterion-special-red" class="text-danger">Um caractere especial</li>
                            </ul>
                            <div class="mb-3">
                                <div class="input-group bg-white border rounded py-2 input-form">
                                    <span
                                        class="input-group-text bg-transparent px-4 border-top-0 border-bottom-0 border-start-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            viewBox="0 0 13.216 15.419">
                                            <g id="noun-lock-6031914" transform="translate(-4 -2)">
                                                <g id="Layer_2" data-name="Layer 2" transform="translate(4 2)">
                                                    <path id="Caminho_932" data-name="Caminho 932"
                                                        d="M15.564,6.956h-1.1V5.3a3.3,3.3,0,0,0-3.3-3.3h-1.1a3.3,3.3,0,0,0-3.3,3.3V6.956h-1.1A1.652,1.652,0,0,0,4,8.608v7.159a1.652,1.652,0,0,0,1.652,1.652h9.912a1.652,1.652,0,0,0,1.652-1.652V8.608a1.652,1.652,0,0,0-1.652-1.652ZM7.855,5.3a2.2,2.2,0,0,1,2.2-2.2h1.1a2.2,2.2,0,0,1,2.2,2.2V6.956H7.855Zm8.26,10.463a.551.551,0,0,1-.551.551H5.652a.551.551,0,0,1-.551-.551V8.608a.551.551,0,0,1,.551-.551h9.912a.551.551,0,0,1,.551.551Zm-4.956-2.2v1.1a.551.551,0,1,1-1.1,0v-1.1a.551.551,0,0,1,1.1,0Z"
                                                        transform="translate(-4 -2)"></path>
                                                </g>
                                            </g>
                                        </svg>
                                    </span>
                                    <div class="form-floating flex-grow-1">
                                        <input type="password" class="form-control bg-transparent border-0"
                                            id="senhaRedefinirRep" placeholder="Repita a Senha"
                                            autocomplete="new-password" required>
                                        <label for="senhaRedefinirRep">Repita a Senha</label>
                                    </div>
                                    <button type="button" class="btn btn-outline-secondary border-0 toggle-password"
                                        data-target="#senhaRedefinirRep">Exibir</button>
                                </div>
                            </div>
                            <div id="passwordMatchRedef" class="mt-2"></div>
                            <div id="mensagemRedefinir" style="margin-top:1rem;color:#ec4115;font-weight:bold"></div>
                            <button type="submit" class="btn btn-orange btn-lg w-100 mt-4 py-3 rounded-0">Salvar Nova
                                Senha</button>
                        </form>
                    </div>

                    <div id="mensagemRetorno" aria-live="assertive"
                        style="margin-top: 16px; font-weight: bold; color: #ec4115; min-height: 20px;">
                    </div>
                </div>
            </div>

            <div class="col-xl-7 col-lg-6 col-12 d-none d-lg-block position-relative pe-0">
                <div class="img__login position-sticky top-0 start-0">
                    <picture>
                        <source data-srcset="/Layout/Imagens/BibliotecaGeral/ImagemFabrica.webp" type="image/webp"
                            srcset="/Layout/Imagens/BibliotecaGeral/ImagemFabrica.webp">
                        <img data-src="/Layout/Imagens/BibliotecaGeral/ImagemFabrica.webp"
                            class="img-fluid object-fit-cover w-100 h-100 lazyloaded" alt="Foto Interna da Fábrica IBR"
                            src="/Layout/Imagens/BibliotecaGeral/ImagemFabrica.webp">
                    </picture>
                </div>
            </div>
        </div>
    </main>

    <script type="text/javascript" src="/Paginas/AreaCliente/Estrutura/Cookies.min.js"></script>

    <script>
        function exibirMensagem(texto, cor) {
            const mensagem = document.getElementById('mensagemRetorno');
            if (!mensagem) return;
            mensagem.textContent = texto || '';
            if (cor) mensagem.style.color = cor;
            if (mensagem.textContent.trim()) {
                mensagem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function verificarAceites(ids) {
            for (const id of ids) {
                const checkbox = document.getElementById(id);
                if (checkbox && !checkbox.checked) {
                    checkbox.focus();
                    exibirMensagem('⚠️ Aceite os termos para continuar.', '#ec4115');
                    return false;
                }
            }
            return true;
        }

        window.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const erro = params.get("erro");
            const cadastro = params.get("cadastro");
            const exclusao = params.get("exclusao");
            const senhaAlt = params.get("senha");
            const atualizacao = params.get("atualizacao");
            const tab = params.get("tab");
            const mensagem = document.getElementById("mensagemRetorno");

            if (tab === 'cadastrar') {
                const botaoCadastro = document.getElementById('pills-cadastrar-tab');
                botaoCadastro?.click();
            }


            if (mensagem) {
                if (erro) {
                    let texto = '';
                    switch (erro) {
                        case 'token_invalido':
                            texto = "⚠️ O link de acesso é inválido ou já expirou.";
                            break;
                        case 'inatividade':
                            texto = "⚠️ Sua sessão expirou por inatividade.";
                            break;
                        case 'nao_autorizado':
                            texto = "⚠️ Usuário não autorizado.";
                            break;
                    }
                    exibirMensagem(texto, '#ec4115');

                } else if (cadastro) {
                    let texto = '';
                    let cor = 'green';
                    switch (cadastro) {
                        case 'sucesso':
                            texto = '✅ Cadastro confirmado com sucesso. Faça login.';
                            break;
                        case 'token_expirado':
                            texto = '⚠️ Link de confirmação expirado.';
                            cor = '#ec4115';
                            break;
                        case 'token_invalido':
                            texto = '⚠️ Link de confirmação inválido.';
                            cor = '#ec4115';
                            break;
                        case 'ja_realizado':
                            texto = '⚠️ Cadastro já confirmado. Faça login.';
                            cor = '#ec4115';
                            break;
                        case 'erro':
                            texto = '⚠️ Erro ao confirmar cadastro.';
                            cor = '#ec4115';
                            break;
                    }
                    exibirMensagem(texto, cor);
                }
                else if (exclusao === 'sucesso') {
                    exibirMensagem('✅ Sua Conta foi Excluída com Sucesso. Esperamos que volte logo.', 'green');
                }
                else if (senhaAlt === 'sucesso') {
                    exibirMensagem('✅ Senha alterada com sucesso. Faça login.', 'green');
                }
                else if (atualizacao === 'sucesso') {
                    exibirMensagem('✅ Dados atualizados com sucesso. Faça login novamente.', 'green');
                }
                history.replaceState({}, document.title, window.location.pathname);
            }
        });
    </script>

    <div id="modal-politica" class="modal-termo" role="dialog" aria-modal="true">
        <div class="modal-conteudo">
            <div id="conteudo-politica" class="termo-modal-content">⏳ Carregando texto...</div>
            <div class="modal-footer">
                <button class="botao-ibr fechar-modal" onclick="fecharModalPolitica()">Fechar</button>
            </div>
        </div>
    </div>

    <div id="modal-responsa" class="modal-termo" role="dialog" aria-modal="true">
        <div class="modal-conteudo">
            <div id="conteudo-responsa" class="termo-modal-content">⏳ Carregando texto...</div>
            <div class="modal-footer">
                <button class="botao-ibr fechar-modal" onclick="fecharModalResponsa()">Fechar</button>
            </div>
        </div>
    </div>

    <script>
        let focoAnterior;
        function abrirModalPolitica() {
            abrirModal('modal-politica', '/Paginas/PoliticaPrivacidade/PoliticaPrivacidade.html', 'conteudo-politica');
        }
        function abrirModalResponsa() {
            abrirModal('modal-responsa', '/Paginas/AreaCliente/Estrutura/TermoResponsabilidade.html', 'conteudo-responsa');
        }
        function abrirModal(id, url, conteudoId) {
            focoAnterior = document.activeElement;
            const modal = document.getElementById(id);
            modal.classList.add('ativo');
            document.body.classList.add('mostrar-termo');
            const primeiro = modal.querySelector('button');
            if (primeiro) primeiro.focus();
            const conteudo = document.getElementById(conteudoId);
            if (!conteudo.dataset.carregado) {
                fetch(url)
                    .then(r => r.text())
                    .then(html => { conteudo.innerHTML = html; conteudo.dataset.carregado = 'true'; })
                    .catch(() => { conteudo.innerHTML = "<p style='color: #ec4115;'>⚠️ Erro ao carregar conteúdo.</p>"; });
            }
        }
        function fecharModalPolitica() { fecharModal('modal-politica'); }
        function fecharModalResponsa() { fecharModal('modal-responsa'); }
        function fecharModal(id) {
            document.getElementById(id).classList.remove('ativo');
            document.body.classList.remove('mostrar-termo');
            if (focoAnterior) focoAnterior.focus();
        }
        window.addEventListener('click', e => {
            if (e.target.id === 'modal-politica') fecharModalPolitica();
            if (e.target.id === 'modal-responsa') fecharModalResponsa();
        });
    </script>

    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>


    <script>
        async function redirecionarSeAutenticado() {
            const params = new URLSearchParams(window.location.search);
            const exclusao = params.get('exclusao');
            const senhaAlt = params.get('senha');
            const atualizacao = params.get('atualizacao');

            const loading = document.getElementById('loading-area');
            const main = document.getElementById('main-content');

            if (exclusao === 'sucesso' || senhaAlt === 'sucesso' || atualizacao === 'sucesso') {
                if (loading) loading.remove();
                if (main) main.style.display = '';
                return;
            }
            try {
                const resp = await fetch('/Paginas/AreaCliente/AcessoCadastro/Acesso/ValidarSessao.php');
                const dados = await resp.json();
                if (dados.sucesso) {
                    window.location.href = '/AreaCliente/Sessao';
                    return;
                }
            } catch (e) {
            }
            if (loading) loading.remove();
            if (main) main.style.display = '';
        }

        document.addEventListener('DOMContentLoaded', redirecionarSeAutenticado);
    </script>

    <script>
        function tratarErroLogin(res, dados) {
            let msg = dados && dados.mensagem;
            if (!msg) {
                switch (res.status) {
                    case 404:
                        msg = '⚠️ E-mail não encontrado. Realize seu cadastro.';
                        break;
                    case 403:
                        msg = '⚠️ Alguma informação está errada. Cadastre-se ou clique em Esqueceu a Senha.';
                        break;
                    case 429:
                        msg = '⚠️ Tente novamente mais tarde.';
                        break;
                    case 400:
                        msg = '⚠️ Dados inválidos.';
                        break;
                    case 500:
                        msg = '⚠️ Erro no servidor.';
                        break;
                }
            }
            exibirMensagem(msg || '⚠️ Erro ao autenticar.', '#ec4115');
        }

        const formLogin = document.getElementById('formLogin');
        if (formLogin) {
            formLogin.addEventListener('submit', function (e) {
                e.preventDefault();
                if (!verificarAceites(['politicaLogin'])) return;
                const email = document.getElementById('email').value;
                const mensagem = document.getElementById('mensagemRetorno');
                const botao = this.querySelector('button[type="submit"]');
                if (mensagem) exibirMensagem('🔐 Autenticando...', '#ec4115');
                botao.disabled = true;
                const spinner = document.createElement('span');
                spinner.className = 'loading-spinner';
                botao.appendChild(spinner);

                const senha = document.getElementById('senhaLogin').value;
                const lembrar = document.getElementById('lembrar').checked;
                fetch('/Paginas/AreaCliente/AcessoCadastro/Acesso/Login.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' },
                    body: new URLSearchParams({ email, senha, lembrar }),
                    credentials: 'same-origin'
                })
                    .then(async res => {
                        let dados = null;
                        try {
                            const tipo = res.headers.get('content-type') || '';
                            if (tipo.includes('application/json')) {
                                dados = await res.json();
                            } else {
                                dados = JSON.parse(await res.text());
                            }
                        } catch { }

                        if (mensagem) {
                            if (res.ok && dados && dados.sucesso) {
                                if (dados.senhaExpirada) {
                                    window.location.href = '/AreaCliente/Sessao/SenhaExpirada/SenhaExpirada.php';
                                } else {
                                    window.location.href = '/';
                                }
                            } else {
                                tratarErroLogin(res, dados);
                            }
                        }
                    })
                    .catch(() => {
                        if (mensagem) {
                            exibirMensagem('⚠️ Erro ao autenticar.', '#ec4115');
                        }
                    })
                    .finally(() => {
                        botao.disabled = false;
                        spinner.remove();
                    });
            });
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mensagem = document.getElementById('mensagemRetorno');
            document.querySelectorAll('#login-tab button[data-bs-toggle="pill"]').forEach(btn => {
                btn.addEventListener('shown.bs.tab', () => {
                    if (mensagem) mensagem.textContent = '';
                });
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tipoPF = document.getElementById('tipoPF');
            const tipoPJ = document.getElementById('tipoPJ');

            const toggleTipo = () => {
                const isPJ = tipoPJ && tipoPJ.checked;
                document.querySelectorAll('.pessoaFisica').forEach(el => el.classList.toggle('d-none', isPJ));
                document.querySelectorAll('.pessoaJuridica').forEach(el => el.classList.toggle('d-none', !isPJ));
            };

            if (tipoPF && tipoPJ) {
                tipoPF.addEventListener('change', toggleTipo);
                tipoPJ.addEventListener('change', toggleTipo);
                toggleTipo();
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cpfCampo = document.getElementById('Cpf');
            const cnpjCampo = document.getElementById('Cnpj');
            const empresaCampo = document.getElementById('NomeEmpresa');
            if (empresaCampo) empresaCampo.readOnly = true;
            const spinnerEmpresa = document.getElementById('spinnerEmpresa');
            let ultimoCNPJ = '';

            function formatarCNPJ(valor) {
                valor = valor.replace(/\D/g, '').slice(0, 14);
                valor = valor.replace(/^(\d{2})(\d)/, '$1.$2');
                valor = valor.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
                valor = valor.replace(/\.(\d{3})(\d)/, '.$1/$2');
                valor = valor.replace(/(\d{4})(\d)/, '$1-$2');
                return valor;
            }

            function formatarCPF(valor) {
                valor = valor.replace(/\D/g, '').slice(0, 11);
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d)/, '$1.$2');
                valor = valor.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                return valor;
            }

            function buscarEmpresa() {
                const num = cnpjCampo.value.replace(/\D/g, '');
                if (num.length === 14 && num !== ultimoCNPJ) {
                    ultimoCNPJ = num;
                    if (spinnerEmpresa) spinnerEmpresa.style.display = 'inline-block';
                    fetch('/Paginas/Universais/BuscarEmpresa.php?cnpj=' + num)
                        .then(r => r.json())
                        .then(j => {
                            if (j.sucesso) {
                                empresaCampo.value = j.nome;
                            }
                        })
                        .catch(() => { })
                        .finally(() => { if (spinnerEmpresa) spinnerEmpresa.style.display = 'none'; });
                } else if (num.length !== 14) {
                    empresaCampo.readOnly = true;
                    if (spinnerEmpresa) spinnerEmpresa.style.display = 'none';
                    ultimoCNPJ = '';
                }
            }

            cpfCampo?.addEventListener('input', e => {
                e.target.value = formatarCPF(e.target.value);
            });

            cnpjCampo?.addEventListener('input', e => {
                e.target.value = formatarCNPJ(e.target.value);
                buscarEmpresa();
            });
            cnpjCampo?.addEventListener('blur', buscarEmpresa);
            const senhaCampo = document.getElementById('senhaCadastro');
            const senhaRepCampo = document.getElementById('senhaRepetida');
            const criterios = {
                length: document.getElementById('criterion-length'),
                upper: document.getElementById('criterion-upper'),
                lower: document.getElementById('criterion-lower'),
                digit: document.getElementById('criterion-digit'),
                special: document.getElementById('criterion-special')
            };
            const mensagens = {
                length: 'Mínimo 8 caracteres',
                upper: 'Uma letra maiúscula',
                lower: 'Uma letra minúscula',
                digit: 'Um número',
                special: 'Um caractere especial'
            };
            for (const [k, li] of Object.entries(criterios)) {
                if (li) li.textContent = `❌ ${mensagens[k]}`;
            }
            const matchMsg = document.getElementById('passwordMatch');

            function validarSenha() {
                const valor = senhaCampo.value;
                const checks = {
                    length: /.{8,}/.test(valor),
                    upper: /[A-Z]/.test(valor),
                    lower: /[a-z]/.test(valor),
                    digit: /\d/.test(valor),
                    special: /[^\w\s]/.test(valor)
                };
                let todos = true;
                for (const [k, ok] of Object.entries(checks)) {
                    const li = criterios[k];
                    if (li) {
                        li.classList.toggle('text-success', ok);
                        li.classList.toggle('text-danger', !ok);
                        li.textContent = `${ok ? '✅' : '❌'} ${mensagens[k]}`;
                    }
                    todos &&= ok;
                }
                senhaCampo.classList.toggle('is-valid', todos);
                senhaCampo.classList.toggle('is-invalid', !todos && valor !== '');
                validarConfirmacao();
            }

            function validarConfirmacao() {
                const match = senhaRepCampo.value === senhaCampo.value && senhaCampo.value !== '';
                senhaRepCampo.classList.toggle('is-valid', match);
                senhaRepCampo.classList.toggle('is-invalid', !match && senhaRepCampo.value !== '');
                if (matchMsg) {
                    if (senhaRepCampo.value === '') {
                        matchMsg.textContent = '';
                        matchMsg.className = 'mt-2';
                    } else if (match) {
                        matchMsg.textContent = 'As senhas conferem.';
                        matchMsg.className = 'valid-feedback d-block';
                    } else {
                        matchMsg.textContent = 'As senhas não conferem.';
                        matchMsg.className = 'invalid-feedback d-block';
                    }
                }
            }

            senhaCampo?.addEventListener('input', validarSenha);
            senhaRepCampo?.addEventListener('input', validarConfirmacao);

            const mensagem = document.getElementById('mensagemRetorno');
            const form = document.getElementById('cadastro');
            if (form) {
                form.addEventListener('submit', e => {
                    e.preventDefault();
                    if (!verificarAceites(['politicaCadastro'])) return;
                    if (mensagem) mensagem.textContent = '';
                    const nome = document.getElementById('NomeCompleto').value.trim();
                    const emailCampo = document.getElementById('Email');
                    if (nome.split(/\s+/).length < 2) {
                        exibirMensagem('⚠️ Informe o Nome Completo.', '#ec4115');
                        document.getElementById('NomeCompleto').focus();
                        return;
                    }

                    const botao = form.querySelector('button[type="submit"]');
                    const usarCnpj = document.getElementById('tipoPJ').checked;
                    const doc = usarCnpj ? cnpjCampo.value : cpfCampo.value;
                    const docDigits = doc.replace(/\D/g, '');

                    let docValido = false;
                    if (docDigits.length === 11) docValido = validarCPF(docDigits);
                    else if (docDigits.length === 14) docValido = validarCNPJ(docDigits);

                    if (!docValido) {
                        exibirMensagem('⚠️ Documento inválido.', '#ec4115');
                        (usarCnpj ? cnpjCampo : cpfCampo).focus();
                        return;
                    }

                    const email = emailCampo.value.trim().toLowerCase();
                    if (!email.includes('@') || !email.includes('.')) {
                        exibirMensagem('⚠️ E-mail inválido.', '#ec4115');
                        emailCampo.focus();
                        return;
                    }

                    if (mensagem) {
                        exibirMensagem('📨 Enviando dados...', '#ec4115');
                    }
                    botao.disabled = true;
                    const spinner = document.createElement('span');
                    spinner.className = 'loading-spinner';
                    botao.appendChild(spinner);

                    const senha = document.getElementById('senhaCadastro').value;
                    const senhaRepetida = document.getElementById('senhaRepetida').value;
                    const dados = new URLSearchParams({
                        nome,
                        email,
                        cpfcnpj: doc,
                        senha,
                        senhaRepetida
                    });

                    fetch('/Paginas/AreaCliente/AcessoCadastro/Cadastro/CadastrarUsuario.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' },
                        body: dados.toString()
                    })
                        .then(async res => {
                            let dadosJson = null;
                            try {
                                const tipo = res.headers.get('Content-Type') || '';
                                if (tipo.includes('application/json')) {
                                    dadosJson = await res.json();
                                } else {
                                    const txt = await res.text();
                                    if (txt) dadosJson = { mensagem: txt, sucesso: res.ok };
                                }
                            } catch { }
                            if (mensagem) {
                                if (dadosJson && dadosJson.mensagem) {
                                    exibirMensagem(dadosJson.mensagem, dadosJson.sucesso ? 'green' : '#ec4115');
                                    if (dadosJson.sucesso) {
                                        const loginTab = document.getElementById('pills-entrar-tab');
                                        if (loginTab) {
                                            loginTab.click();
                                            setTimeout(() => {
                                                exibirMensagem(dadosJson.mensagem, 'green');
                                            }, 50);
                                        }
                                    }
                                } else {
                                    exibirMensagem('⚠️ Erro ao cadastrar. Tente novamente.', '#ec4115');
                                }
                            }
                        })
                        .catch(() => {
                            if (mensagem) {
                                exibirMensagem('⚠️ Erro ao cadastrar. Tente novamente.', '#ec4115');
                            }
                        })
                        .finally(() => {
                            botao.disabled = false;
                            spinner.remove();
                        });
                });
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const forgotLink = document.getElementById('forgotPassword');
            const formRec = document.getElementById('formRecuperarSenha');
            const entrarTab = document.getElementById('pills-entrar-tab');

            forgotLink?.addEventListener('click', e => {
                e.preventDefault();
                formRec?.classList.remove('d-none');
                formLogin?.classList.add('d-none');
            });

            entrarTab?.addEventListener('click', () => {
                formRec?.classList.add('d-none');
                formLogin?.classList.remove('d-none');
            });

            formRec?.addEventListener('submit', async e => {
                e.preventDefault();
                const msg = document.getElementById('mensagemRecuperar');
                if (msg) {
                    msg.textContent = '📨 Enviando...';
                    msg.style.color = '#ec4115';
                }
                const email = document.getElementById('emailRecuperar').value.trim().toLowerCase();
                try {
                    const resp = await fetch('/Paginas/AreaCliente/AcessoCadastro/Acesso/RecuperarSenha.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' },
                        body: new URLSearchParams({ email })
                    });
                    let texto = null;
                    try { texto = await resp.text(); } catch { }
                    let dados = null;
                    try { dados = JSON.parse(texto); } catch { }
                    if (msg) {
                        const sucesso = dados?.sucesso === true;
                        msg.textContent = dados?.mensagem || (sucesso ? '✅ Verifique seu e-mail.' : '⚠️ Erro ao processar solicitação.');
                        msg.style.color = sucesso ? 'green' : '#ec4115';
                    }
                } catch {
                    if (msg) {
                        msg.textContent = 'Erro ao processar solicitação.';
                        msg.style.color = '#ec4115';
                    }
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const closedEyeSvg = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.97993 8.22257C3.05683 9.31382 2.35242 10.596 1.93436 12.0015C3.22565 16.338 7.24311 19.5 11.9991 19.5C12.9917 19.5 13.9521 19.3623 14.8623 19.1049M6.22763 6.22763C7.88389 5.13558 9.86771 4.5 12 4.5C16.756 4.5 20.7734 7.66205 22.0647 11.9985C21.3528 14.3919 19.8106 16.4277 17.772 17.772M6.22763 6.22763L3 3M6.22763 6.22763L9.87868 9.87868M17.772 17.772L21 21M17.772 17.772L14.1213 14.1213M14.1213 14.1213C14.6642 13.5784 15 12.8284 15 12C15 10.3431 13.6569 9 12 9C11.1716 9 10.4216 9.33579 9.87868 9.87868M14.1213 14.1213L9.87868 9.87868" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
            const openEyeSvg = `<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.03555 12.3224C1.96647 12.1151 1.9664 11.8907 2.03536 11.6834C3.42372 7.50972 7.36079 4.5 12.0008 4.5C16.6387 4.5 20.5742 7.50692 21.9643 11.6776C22.0334 11.8849 22.0335 12.1093 21.9645 12.3166C20.5761 16.4903 16.6391 19.5 11.9991 19.5C7.36119 19.5 3.42564 16.4931 2.03555 12.3224Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9C13.6569 9 15 10.3431 15 12Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
            document.querySelectorAll('.toggle-password').forEach(btn => {
                const target = document.querySelector(btn.dataset.target);
                if (target) btn.innerHTML = closedEyeSvg;
                btn.addEventListener('click', () => {
                    if (!target) return;
                    const visible = target.type === 'text';
                    target.type = visible ? 'password' : 'text';
                    btn.innerHTML = visible ? closedEyeSvg : openEyeSvg;
                    target.focus();
                });
            });

            const senhaCadastro = document.getElementById('senhaCadastro');
            const criteria = document.getElementById('passwordCriteria');
            if (senhaCadastro && criteria) {
                senhaCadastro.addEventListener('focus', () => {
                    criteria.classList.remove('d-none');
                });
                senhaCadastro.addEventListener('blur', () => {
                    criteria.classList.add('d-none');
                });
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const token = params.get('token');
            const redefBox = document.getElementById('redefinirSenhaContainer');
            if (token && redefBox) {
                document.querySelector('.pills-login')?.classList.add('d-none');
                document.getElementById('login-tabContent')?.classList.add('d-none');
                redefBox.classList.remove('d-none');
                const hidden = document.getElementById('tokenRedef');
                if (hidden) hidden.value = token;
            }

            const senhaCampo = document.getElementById('senhaRedefinir');
            const senhaRepCampo = document.getElementById('senhaRedefinirRep');
            const criterios = {
                length: document.getElementById('criterion-length-red'),
                upper: document.getElementById('criterion-upper-red'),
                lower: document.getElementById('criterion-lower-red'),
                digit: document.getElementById('criterion-digit-red'),
                special: document.getElementById('criterion-special-red')
            };
            const mensagens = {
                length: 'Mínimo 8 caracteres',
                upper: 'Uma letra maiúscula',
                lower: 'Uma letra minúscula',
                digit: 'Um número',
                special: 'Um caractere especial'
            };
            for (const [k, li] of Object.entries(criterios)) {
                if (li) li.textContent = `❌ ${mensagens[k]}`;
            }
            const matchMsg = document.getElementById('passwordMatchRedef');
            function validarSenha() {
                const valor = senhaCampo.value;
                const checks = {
                    length: /.{8,}/.test(valor),
                    upper: /[A-Z]/.test(valor),
                    lower: /[a-z]/.test(valor),
                    digit: /\d/.test(valor),
                    special: /[^\w\s]/.test(valor)
                };
                let todos = true;
                for (const [k, ok] of Object.entries(checks)) {
                    const li = criterios[k];
                    if (li) {
                        li.classList.toggle('text-success', ok);
                        li.classList.toggle('text-danger', !ok);
                        li.textContent = `${ok ? '✅' : '❌'} ${mensagens[k]}`;
                    }
                    todos &&= ok;
                }
                senhaCampo.classList.toggle('is-valid', todos);
                senhaCampo.classList.toggle('is-invalid', !todos && valor !== '');
                validarConfirmacao();
            }
            function validarConfirmacao() {
                const match = senhaRepCampo.value === senhaCampo.value && senhaCampo.value !== '';
                senhaRepCampo.classList.toggle('is-valid', match);
                senhaRepCampo.classList.toggle('is-invalid', !match && senhaRepCampo.value !== '');
                if (matchMsg) {
                    if (senhaRepCampo.value === '') {
                        matchMsg.textContent = '';
                        matchMsg.className = 'mt-2';
                    } else if (match) {
                        matchMsg.textContent = 'As senhas conferem.';
                        matchMsg.className = 'valid-feedback d-block';
                    } else {
                        matchMsg.textContent = 'As senhas não conferem.';
                        matchMsg.className = 'invalid-feedback d-block';
                    }
                }
            }
            senhaCampo?.addEventListener('input', validarSenha);
            senhaRepCampo?.addEventListener('input', validarConfirmacao);
            const criteriaRedef = document.getElementById('passwordCriteriaRedef');
            if (senhaCampo && criteriaRedef) {
                senhaCampo.addEventListener('focus', () => criteriaRedef.classList.remove('d-none'));
                senhaCampo.addEventListener('blur', () => criteriaRedef.classList.add('d-none'));
            }
            document.getElementById('formRedefinirSenha')?.addEventListener('submit', async e => {
                e.preventDefault();
                const msg = document.getElementById('mensagemRedefinir');
                if (msg) {
                    msg.textContent = '📨 Enviando...';
                    msg.style.color = '#ec4115';
                }
                const body = new URLSearchParams({
                    token,
                    senha: senhaCampo.value,
                    senhaRepetida: senhaRepCampo.value
                });
                const csrf = document.cookie.match(/(?:^|;\s*)csrf_token=([A-Fa-f0-9]{64})/);
                if (csrf) body.append('csrf_token', csrf[1]);
                try {
                    const resp = await fetch('/Paginas/AreaCliente/AcessoCadastro/Acesso/RedefinirSenhaAPI.php', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' },
                        body,
                        credentials: 'same-origin',
                        cache: 'no-store'
                    });
                    let texto = null;
                    try { texto = await resp.text(); } catch { }
                    let dados = null;
                    try { dados = JSON.parse(texto); } catch { }
                    const sucesso = resp.ok && dados?.sucesso === true;
                    if (msg) {
                        if (sucesso) {
                            msg.textContent = '🔄 Redirecionando...';
                            msg.style.color = '#ec4115';
                        } else {
                            msg.textContent = dados?.mensagem || texto || '⚠️ Erro ao processar solicitação.';
                            msg.style.color = '#ec4115';
                        }
                    }
                    if (sucesso) {
                        setTimeout(() => { window.location.href = '/AreaCliente?senha=sucesso'; }, 1500);
                    } else {
                        console.error('Erro ao redefinir senha', resp.status, texto);
                        setTimeout(() => { window.location.href = '/AreaCliente'; }, 1500);
                    }
                } catch (e) {
                    console.error('Erro ao redefinir senha', e);
                    if (msg) {
                        msg.textContent = 'Erro ao processar solicitação.';
                        msg.style.color = '#ec4115';
                        setTimeout(() => { window.location.href = '/AreaCliente'; }, 1500);
                    }
                }
            });
        });
    </script>

    <script>
        window.addEventListener('pageshow', function (e) {
            var navType = (performance.getEntriesByType && performance.getEntriesByType('navigation')[0]?.type) ||
                (performance.navigation && performance.navigation.type);
            if (e.persisted || navType === 'back_forward' || navType === 2) {
                window.location.reload();
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[type="password"]').forEach(inp => {
                const warn = document.createElement('div');
                warn.className = 'caps-warning mt-1 d-none';
                warn.style.color = '#ec4115';
                warn.style.fontSize = '0.875rem';
                warn.textContent = 'Caps Lock ativado';
                inp.insertAdjacentElement('afterend', warn);
                const toggle = e => {
                    const caps = e.getModifierState && e.getModifierState('CapsLock');
                    warn.classList.toggle('d-none', !caps);
                };
                inp.addEventListener('keydown', toggle);
                inp.addEventListener('keyup', toggle);
                inp.addEventListener('focus', toggle);
                inp.addEventListener('blur', () => warn.classList.add('d-none'));
            });
        });
    </script>

</body>

</html>